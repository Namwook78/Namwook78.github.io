---
title: "crawling (web site 에서 데이터 가져오기) "

categories:
  - todo
tags:
  - [react, project]

toc: true
toc_sticky: true

date: 2022-04-25
last_modified_at: 2022-04-26
---

# Crawling → Web site에서 데이터 가져오는 작업

[https://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-beautiful-soup](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-beautiful-soup)

ex)확진자수 → data 변경하고싶음 → 마우스 우클릭(검사) → 왼쪽상단(화살표)

웹상에 있는 데이터를 수집하는 도구가필요

ctrl +Alt +L → 코딩 교정

## DATA 수집을 위한 라이브러리

- Scrapy(CSS,XAPTH)
- BeautifulSoup가장일반적인 수집도구(CSS통해서 수집),
- Selenium(CSS,XPATH통해서 데이터 수집 + Java script) → java 필요 + 몇개 설치 도구 필요
![화면 캡처 2022-04-25 124030](https://user-images.githubusercontent.com/101306712/165251973-a2adb6fb-ef2c-423e-b0d0-790bffe0d50b.png)

 

# 웹사이트 만드는 3대조건 + 1

Html, CSS, JavaScript, Ajax(비동기처리)→ 고급정보

# 웹사이트 구동 방식

- GET / POST

# 라이브러리 설치

- crawling c드라이브에 파일 만듬
- pycharm → 가상환경설정
- pip install beautifulsoup4
- pip install numpy pandas matplotlib seaborn
- pip install requests

# 실행

index.html

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <titl>test</titl>
</head>
<body>
    <h1>aaaaaaaa</h1>
    <h2>dddd</h2>
    <div class="chapter01">
        <p>Don't Crawl here </p>
    </div>
    <div class="chapter02">
        <p>Just Crawling here</p>
    </div>
    <div id = "main">
        <p>crawling............</p>
    </div>
</body>
</html>
```

[main.py](http://main.py) → python main.py

```

from bs4 import BeautifulSoup

# 첫번째 작업 index.html 파일을 Beautifulsoup 객체로 변환
## 클래스로 변환 ---> 클래스 내부의 메서드 사용

soup = BeautifulSoup(open("index.html"), "html.parser", from_encoding = "utf-8")
print(type(soup))

# print(soup.find("div", class_ = "chapter02")) -> 지정된 값
# print(soup.find("p")) -> 첫번째 p값(Don't Crawl here)
# print(soup.find_all("p"))   -> 모든 p값
# results = soup.find_all("p")
# print(results[1]) -> 슬라이싱 0,1,2,... 첫번째 p값
# print(soup.find("div", id = "main").find("p").get_text()) 
-> 내용만 나옴 <p>,</p> 안나옴

```

[req-main.py](http://req-main.py) → python req_main.py

```
# 네이버 접속
import requests
from bs4 import BeautifulSoup

url = "https://www.naver.com/"

def main(url):
    req = requests.get(url)
    print(req.status_code)
    print(req.text)

if __name__ == "__main__":
    url = "https://www.naver.com/"
    main(url=url)
```

index2.html → beautifulsoup Quick start

```
<!DOCTYPE html>
html_doc = """
<html>
<head><title>The Dormouse's story</title></head>
<body>
<p class="title"><b>The Dormouse's story</b></p>

<p class="story">Once upon a time there were three little sisters; and their names were
    <a href="http://example.com/elsie" class="sister" id="link1">Elsie</a>,
    <a href="http://example.com/lacie" class="sister" id="link2">Lacie</a> and
    <a href="http://example.com/tillie" class="sister" id="link3">Tillie</a>;
    and they lived at the bottom of a well.</p>

<p class="story">...</p>
"""
```

[https://docs.python-requests.org/en/latest/](https://docs.python-requests.org/en/latest/)

referer, user-agent